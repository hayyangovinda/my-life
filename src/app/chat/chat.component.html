<main>
  <header>
    <div class="header-container">
      <img (click)="toggleSidenav()" src="../../assets/icons/menu.svg" alt="" />
      <h5>My Life</h5>
    </div>
  </header>

  <h4>{{ response }}</h4>
  <div class="chat-body" id="chatBody">
    <div
      *ngFor="let message of messages; let i = index"
      class="message"
      [class.received]="message.type === 'received'"
      [class.sent]="message.type === 'sent'"
    >
      <div *ngIf="message.type === 'received'" class="received-container">
        <img src="../../assets/icons/logo.svg" alt="" />
        <p class="received">
          {{ message.text }}
        </p>
      </div>
      <div class="message-container">
        <p
          appLongPress
          (longPress)="showDeleteIcon = true; deleteIconPosition = i"
          *ngIf="message.type === 'sent'"
          class="sent"
        >
          {{ message.text }}
        </p>
        <img
          (click)="onDeleteIconClick(i)"
          class="delete-icon"
          src="../../assets/icons/delete.png"
          *ngIf="
            showDeleteIcon &&
            message.type === 'sent' &&
            i === deleteIconPosition
          "
        />
      </div>
    </div>
  </div>
  <footer>
    <img class="camera" src="assets/icons/camera.svg" alt="" />
    <div class="text-area-wrapper">
      <textarea
        [(ngModel)]="newMessage"
        (input)="autoGrow($event)"
        placeholder="Type a message"
      ></textarea>

      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox="0 -960 960 960"
        width="24px"
        fill="#ff5b24"
        (click)="toggleRecording()"
      >
        <path
          d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Zm0-240Zm-40 520v-123q-104-14-172-93t-68-184h80q0 83 58.5 141.5T480-320q83 0 141.5-58.5T680-520h80q0 105-68 184t-172 93v123h-80Zm40-360q17 0 28.5-11.5T520-520v-240q0-17-11.5-28.5T480-800q-17 0-28.5 11.5T440-760v240q0 17 11.5 28.5T480-480Z"
        />
      </svg>
    </div>
    <img
      (click)="sendMessage()"
      class="send"
      src="assets/icons/arrow.svg"
      alt=""
    />
  </footer>
</main>
