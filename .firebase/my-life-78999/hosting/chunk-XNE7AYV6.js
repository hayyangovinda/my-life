import{a as _}from"./chunk-D6VDJXMI.js";import{a as M}from"./chunk-XVXDBZAN.js";import"./chunk-GTL4EDMA.js";import{p as f}from"./chunk-E6I4JPOI.js";import{$ as d,Ab as i,Bb as x,Jb as c,Tb as a,Ub as m,Va as p,Vb as y,_b as u,bc as v,dc as b,ea as l,qa as g,ra as h,zb as o}from"./chunk-FVMQVLXL.js";import"./chunk-CWTPBX7D.js";var E=(()=>{let n=class n{constructor(){this.sharingService=d(_),this.generatedStory="",this.httpService=d(M),this.promptToSend=`rewrite the following as an entry in a diary/journal in a proper tone,  write it in the first person,u can use emojis, write good easy simple english.give me only the story,no title no date, no other details ,do not invent your own story,base iton the given prompts 

`,this.storyId=""}toggleSidenav(){this.sharingService.toggleSidenav()}ngOnInit(){this.sharingService.dayToGenerate$.subscribe(t=>{if(this.date=t.date,this.dayChatId=t._id,this.dayPrompts=t.inputs,t.story){this.generatedStory=t.story;return}this.dayPrompts=this.dayPrompts.filter(e=>e.type==="sent").map(e=>e.text).join(","),console.log("dayPrompts",this.dayPrompts),this.promptToSend=this.promptToSend+this.dayPrompts,this.httpService.generateStory({prompt:this.promptToSend}).subscribe(e=>{this.generatedStory=e.generatedText,this.httpService.updateDayChat(this.dayChatId,{story:this.generatedStory}).subscribe(r=>{})})})}updateStory(){let t=document.getElementById("story-body")?.innerText;this.httpService.updateDayChat(this.dayChatId,{story:t}).subscribe(e=>{console.log(e)})}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l({type:n,selectors:[["app-day-story"]],inputs:{storyId:"storyId"},standalone:!0,features:[u],decls:12,vars:5,consts:[[1,"main","story"],[1,"header-story"],[1,"header-container"],["xmlns","http://www.w3.org/2000/svg","height","30px","viewBox","0 -960 960 960","width","30px","fill","var(--black-text-color)",3,"click"],["d","M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"],["contenteditable","true","id","story-body",1,"story-body",3,"blur"]],template:function(e,r){e&1&&(o(0,"main",0)(1,"header",1)(2,"div",2),g(),o(3,"svg",3),c("click",function(){return r.toggleSidenav()}),x(4,"path",4),i(),h(),o(5,"h5"),a(6,"My Life"),i()()(),o(7,"h4"),a(8),v(9,"date"),i(),o(10,"div",5),c("blur",function(){return r.updateStory()}),a(11),i()()),e&2&&(p(8),m(b(9,2,r.date,"EEEE, dd MMMM yyyy")),p(3),y(" ",r.generatedStory," "))},dependencies:[f],styles:["main[_ngcontent-%COMP%]{height:100%;overflow-y:hidden;background-color:var(--secondary-bg-color)}footer[_ngcontent-%COMP%]{position:absolute;bottom:5px;width:100%;display:flex;align-items:center}footer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:10px;resize:none;height:40px;max-height:120px;overflow-y:auto;outline:none}.camera[_ngcontent-%COMP%]{width:30px;height:30px;margin-left:10px;border-radius:50%}.send[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px;border-radius:50%}.chat-body[_ngcontent-%COMP%]{height:calc(100% - 100px);overflow-y:scroll;padding:10px;display:flex;flex-direction:column;gap:10px;font-size:.9rem}.message[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px;border-radius:8px;word-wrap:break-word;max-width:90%}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.message.received[_ngcontent-%COMP%]{color:var(--black-text-color);text-align:left;align-self:flex-start;background-color:var(--main-bg-color)}.message.sent[_ngcontent-%COMP%]{color:var(--sent-text-color);align-self:flex-end;margin-left:auto;display:inline-block;background-color:var(--primary-color);padding:5px 10px;text-align:right}textarea[_ngcontent-%COMP%]{flex:1;resize:none;padding:8px;border-radius:8px;border:1px solid #ccc;width:100%;background-color:var(--secondary-bg-color);color:var(--black-text-color)}.send[_ngcontent-%COMP%], .camera[_ngcontent-%COMP%]{cursor:pointer}.received-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.received-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background-image:var(--header-border-color);border:0;box-shadow:var(--header-shadow);box-sizing:border-box;padding-bottom:1px}header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer;margin-left:10px}h5[_ngcontent-%COMP%]{color:var(--title-color);font-size:15px}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background-color:var(--secondary-bg-color);padding:9px 3px;width:100%;height:100%;color:#757575}.message-container[_ngcontent-%COMP%]{position:relative}.delete-icon[_ngcontent-%COMP%]{width:19px;height:19px;cursor:pointer;position:absolute;right:-17px;top:-12px}.text-area-wrapper[_ngcontent-%COMP%]{width:100%;margin:0 10px;position:relative}.text-area-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;right:12px;bottom:12px;cursor:pointer}.chat-image[_ngcontent-%COMP%]{max-width:100%;height:200px;object-fit:cover}.loader[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#252525e6;z-index:100;display:flex;align-items:center;justify-content:center}",".story-body[_ngcontent-%COMP%]{color:var(--black-text-color);padding:22px 35px 35px;line-height:30px;text-align:justify;font-size:15px}.main.story[_ngcontent-%COMP%]{overflow-y:auto}.header-story[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}h4[_ngcontent-%COMP%]{margin-top:20px;color:var(--black-text-color);text-align:center}"]});let s=n;return s})();export{E as DayStoryComponent};
