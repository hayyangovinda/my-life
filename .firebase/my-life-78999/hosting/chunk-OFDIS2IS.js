import{a as T,b as D,f as I,i as k}from"./chunk-YQDQSI62.js";import{a as E}from"./chunk-GLZ7CWDM.js";import"./chunk-N6K2W27P.js";import{$a as g,Ea as c,Eb as S,Fb as P,N as C,T as h,Ta as f,Va as p,W as _,Xa as M,Za as o,_a as r,eb as x,fb as u,jb as m,kb as y,lb as v,mb as b,nb as w,pb as O}from"./chunk-ROZATKAH.js";var F=(()=>{let n=class n{constructor(){}formatDateToStartOfDayUTC(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${d}T00:00:00.000Z`}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();function H(i,n){if(i&1&&(o(0,"div",10),g(1,"img",11),o(2,"p",12),m(3),r()()),i&2){let s=u().$implicit;c(3),y(" ",s.text," ")}}function N(i,n){if(i&1&&(o(0,"p",13),m(1),r()),i&2){let s=u().$implicit;c(),y(" ",s.text," ")}}function W(i,n){if(i&1&&(o(0,"div",7),f(1,H,4,1,"div",8)(2,N,2,1,"p",9),r()),i&2){let s=n.$implicit;M("received",s.type==="received")("sent",s.type==="sent"),c(),p("ngIf",s.type==="received"),c(),p("ngIf",s.type==="sent")}}var K=(()=>{let n=class n{constructor(){this.inputs=[],this.todayDate=new Date,this.newMessage="",this.httpService=h(E),this.utilsService=h(F),this.messages=[{text:"Hello! What's new today?",type:"received"}]}ngOnInit(){let e=this.utilsService.formatDateToStartOfDayUTC(this.todayDate);this.httpService.getDayChat(e).subscribe(t=>{t.length?(this.todayChat=t[0],console.log(this.todayChat),this.messages=this.todayChat.inputs):this.httpService.createDayChat({date:e,inputs:[{text:"Hello! What's new today?",type:"received"}]}).subscribe(a=>{this.todayChat=a})})}autoGrow(e){let t=e.target;t.style.height="auto",t.value?t.style.height=t.scrollHeight+"px":t.style.height="40px"}sendMessage(){if(this.newMessage.trim()!==""){this.messages.push({text:this.newMessage,type:"sent"});let e=["Got it!","Understood!","Noted!","Message received!","Roger that!","Gotcha!"],t=Math.floor(Math.random()*e.length),a=e[t];this.messages.push({text:a,type:"received"}),this.todayChat.inputs=this.messages,this.httpService.updateDayChat(this.todayChat._id,{inputs:this.todayChat.inputs}).subscribe(d=>{console.log("update",d)}),this.newMessage="",this.scrollChatToBottom()}}onEnter(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())}scrollChatToBottom(){setTimeout(()=>{let e=document.getElementById("chatBody");e&&(e.scrollTop=e.scrollHeight)},0)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_({type:n,selectors:[["app-chat"]],standalone:!0,features:[O],decls:12,vars:2,consts:[[1,"header-container"],["src","../../assets/icons/menu.png","alt",""],["id","chatBody",1,"chat-body"],["class","message",3,"received","sent",4,"ngFor","ngForOf"],["src","assets/icons/camera.png","alt","",1,"camera"],["placeholder","Type a message",3,"ngModelChange","input","ngModel"],["src","assets/icons/arrow.png","alt","",1,"send",3,"click"],[1,"message"],["class","received-container",4,"ngIf"],["class","sent",4,"ngIf"],[1,"received-container"],["src","../../assets/icons/logo.png","alt",""],[1,"received"],[1,"sent"]],template:function(t,a){t&1&&(o(0,"main")(1,"header")(2,"div",0),g(3,"img",1),o(4,"h5"),m(5,"My Life"),r()()(),o(6,"div",2),f(7,W,3,6,"div",3),r(),o(8,"footer"),g(9,"img",4),o(10,"textarea",5),w("ngModelChange",function(l){return b(a.newMessage,l)||(a.newMessage=l),l}),x("input",function(l){return a.autoGrow(l)}),r(),o(11,"img",6),x("click",function(){return a.sendMessage()}),r()()()),t&2&&(c(7),p("ngForOf",a.messages),c(3),v("ngModel",a.newMessage))},dependencies:[S,k,T,D,I,P],styles:["main[_ngcontent-%COMP%]{height:100%;overflow-y:hidden;background-color:#05062d}footer[_ngcontent-%COMP%]{position:absolute;bottom:5px;width:100%;display:flex;align-items:center}footer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:10px;margin:0 10px;resize:none;height:40px;max-height:120px;overflow-y:auto;outline:none}.camera[_ngcontent-%COMP%]{width:30px;height:30px;margin-left:10px;border-radius:50%;margin-right:10px}.send[_ngcontent-%COMP%]{width:35px;height:35px;margin-right:10px;border-radius:50%}.chat-body[_ngcontent-%COMP%]{height:calc(100% - 100px);overflow-y:scroll;padding:10px;display:flex;flex-direction:column;gap:10px;font-size:.9rem}.message[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px;border-radius:8px;word-wrap:break-word}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.message.received[_ngcontent-%COMP%]{color:#e2e2e2;text-align:left;align-self:flex-start}.message.sent[_ngcontent-%COMP%]{color:#e2e2e2;align-self:flex-end;margin-left:auto;display:inline-block;background-color:#4a4ad8;text-align:right}textarea[_ngcontent-%COMP%]{flex:1;resize:none;padding:8px;border-radius:8px;border:1px solid #ccc;margin:0 10px}.send[_ngcontent-%COMP%], .camera[_ngcontent-%COMP%]{cursor:pointer}.received-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.received-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background-image:linear-gradient(144deg,#af40ff,#5b42f3 50%,#00ddeb);border:0;border-radius:8px;box-shadow:#9741fc33 0 15px 30px -5px;box-sizing:border-box;padding-bottom:3px}header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer;margin-left:10px}h5[_ngcontent-%COMP%]{color:#e2e2e2}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background-color:#05062d;padding:9px 3px;border-radius:6px;width:100%;height:100%}"]});let i=n;return i})();export{K as ChatComponent};
